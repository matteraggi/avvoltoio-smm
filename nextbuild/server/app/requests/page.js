(()=>{var e={};e.id=608,e.ids=[608],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},90515:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>d,routeModule:()=>h,tree:()=>l});var s=r(73137),o=r(54647),a=r(4183),i=r.n(a),n=r(71775),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);r.d(t,c);let u=s.AppPageRouteModule,l=["",{children:["requests",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8663)),"/Users/matteoraggi/Dev/avvoltoio-smm/src/app/requests/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,84167)),"/Users/matteoraggi/Dev/avvoltoio-smm/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,51918,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/matteoraggi/Dev/avvoltoio-smm/src/app/requests/page.tsx"],p="/requests/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new u({definition:{kind:o.x.APP_PAGE,page:"/requests/page",pathname:"/requests",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},87435:(e,t,r)=>{Promise.resolve().then(r.bind(r,62153))},62153:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var s=r(60080),o=r(53085),a=r(9885),i=r.n(a),n=r(78735);let __WEBPACK_DEFAULT_EXPORT__=()=>{let[e,t]=i().useState([]),[r,c]=i().useState(!1),u=i().useRef(!1),l=i().useRef(0),getDbNotification=()=>{let e=n.F+`api/notification/?page=${l.current}&size=8`;console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("id_token")}}).then(e=>{if(!e.ok)throw e.status;return e.json()}).then(e=>{0===e.length?(l.current--,u.current=!0):(t(t=>[...t,...e]),u.current=!1),console.log(e)}).catch(e=>{console.log(e)})},loadMore=e=>{e.preventDefault(),u.current||(l.current++,getDbNotification())},d=Date.now(),displayNotification=e=>{let t;e.message&&(e=e.message),t="MESSAGE"===e.type?"ti ha mandato un messaggio":"SMM"===e.type?"vuole diventare tuo cliente":"SQUEAL"===e.type?"ha postato uno Squeal":"COMMENT"===e.type?`ha commentato uno tuo Squeal: "${e.body}"`:"REACTION"===e.type?"heart"===e.reaction?"ha reagito con ❤️ al tuo Squeal":"exploding"===e.reaction?"ha reagito con \uD83E\uDD2F al tuo Squeal":"cold"===e.reaction?"ha reagito con \uD83E\uDD76 al tuo Squeal":"nerd"===e.reaction?"ha reagito con \uD83E\uDD13 al tuo Squeal":"clown"===e.reaction?"ha reagito con \uD83E\uDD21 al tuo Squeal":"bored"===e.reaction?"ha reagito con \uD83D\uDE34 al tuo Squeal":"ha reagito al tuo Squeal":"nuova notifica sconosciuta";let addClient=e=>{let t=n.F+`api/account/add-client/?client=${e}`;console.log(t),fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("id_token")}}).then(e=>{if(!e.ok)throw e.status;return c(!0),e.json()}).then(e=>{console.log(e)}).catch(e=>{alert("Hai gi\xe0 accettato questa richiesta!"),console.log(e)})};return s.jsx("div",{children:t.length>1&&(0,s.jsxs)("div",{className:"flex flex-row justify-between p-2 bg-white rounded-xl",children:[s.jsx("span",{className:"",children:`${e.username} ${t}`}),(0,s.jsxs)("p",{className:"text-[12px]",children:["SMM"===e.type&&s.jsx("button",{className:r?"mx-4 rounded bg-green-700 text-white font-bold p-1":"mx-4 rounded bg-red-700 text-white font-bold p-1",onClick:()=>addClient(e.username),children:r?"Richiesta Accettata!":"Accetta"}),function(e,t){var r=e-t;return r<6e4?Math.round(r/1e3)+" seconds ago":r<36e5?Math.round(r/6e4)+" minutes ago":r<864e5?Math.round(r/36e5)+" hours ago":r<2592e6?Math.round(r/864e5)+" days ago":r<31536e6?"about "+Math.round(r/2592e6)+" months ago":"about "+Math.round(r/31536e6)+" years ago"}(d,e.timestamp)]})]},Math.random())})};return(0,a.useEffect)(()=>{getDbNotification()},[]),(0,s.jsxs)("section",{children:[s.jsx(o.default,{}),s.jsx("div",{className:"flex justify-center align-middle w-full",children:(0,s.jsxs)("div",{className:"flex flex-col justify-center align-middle w-3/5",children:[s.jsx("h1",{className:"text-black text-center",children:"Richieste"}),0===e.length?s.jsx("p",{className:"text-center",children:"Non hai nessuna richiesta :("}):(0,s.jsxs)("div",{className:"text-center border-black border-2 rounded h-[700px] overflow-y-scroll",children:[e.map(e=>displayNotification(e)),0!=e.length&&!u.current&&s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{className:"flex items-center justify-center px-3 h-8 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",onClick:e=>loadMore(e),children:"Load more"})})]})]})})]})}},8663:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>c});var s=r(17536);let o=(0,s.createProxy)(String.raw`/Users/matteoraggi/Dev/avvoltoio-smm/src/app/requests/page.tsx`),{__esModule:a,$$typeof:i}=o,n=o.default,c=n}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[672,520,978,85],()=>__webpack_exec__(90515));module.exports=r})();