(()=>{var e={};e.id=481,e.ids=[481],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},75001:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>u,routeModule:()=>p,tree:()=>c});var a=s(73137),r=s(54647),n=s(4183),i=s.n(n),o=s(71775),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=a.AppPageRouteModule,c=["",{children:["dashboard",{children:["stats",{children:["[squeal_id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,26382)),"/Users/matteoraggi/Dev/avvoltoio-smm/src/app/dashboard/stats/[squeal_id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5055)),"/Users/matteoraggi/Dev/avvoltoio-smm/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,84167)),"/Users/matteoraggi/Dev/avvoltoio-smm/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/matteoraggi/Dev/avvoltoio-smm/src/app/dashboard/stats/[squeal_id]/page.tsx"],m="/dashboard/stats/[squeal_id]/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new d({definition:{kind:r.x.APP_PAGE,page:"/dashboard/stats/[squeal_id]/page",pathname:"/dashboard/stats/[squeal_id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},49947:(e,t,s)=>{Promise.resolve().then(s.bind(s,54338))},54338:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=s(60080),r=s(78735),n=s(91418),i=s(9885),o=s(94595),l=s(57546),d=s(50518),c=s(35550),u=s(75397),m=s(16526),x=s(73807),p=s(11440),h=s.n(p),g=s(63900),b=s(56490),j=s(43872),f=s.n(j),_=s(92034),q=s.n(_),v=s(94599),w=s.n(v),y=s(52208),N=s.n(y),A=s(52451),C=s.n(A),P=s(91226);let __WEBPACK_DEFAULT_EXPORT__=({params:e})=>{let t=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/gm,s=e.squeal_id,{clients:p,setClients:j}=(0,i.useContext)(o.ClientsContext),[_,v]=(0,i.useState)(),[y,A]=(0,i.useState)(!1),Z=[{name:"heart",label:"heart",icon:a.jsx(l.Z,{}),command:()=>{addReaction("heart",!0)}},{name:"exploding",label:"exploding",icon:a.jsx(d.Z,{}),command:()=>{addReaction("exploding",!0)}},{name:"cold",label:"cold",icon:a.jsx(c.Z,{}),command:()=>{addReaction("cold",!0)}},{name:"nerd",label:"nerd",icon:a.jsx(u.Z,{}),command:()=>{addReaction("nerd",!1)}},{name:"clown",label:"clown",icon:a.jsx(m.Z,{}),command:()=>{addReaction("clown",!1)}},{name:"bored",label:"bored",icon:a.jsx(x.Z,{}),command:()=>{addReaction("bored",!1)}}],addReaction=(e,t)=>{let a=r.F+`api/client-squeal-reaction/create/${p.login}`;fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("id_token")},body:JSON.stringify({positive:t,emoji:e,squeal_id:s})}).then(e=>{if(!e.ok)throw e.status;return e.json()}).then(e=>{let t=_?.reactions?.find(e=>e.reaction===_?.active_reaction);if(_?.active_reaction){if(t?.number&&(t.number--,t.number<=0)){let e=_.reactions.indexOf(t);_?.reactions?.splice(e,1)}if("deleted"===e.emoji)return _.active_reaction=null,_}if(t=_?.reactions?.find(t=>t.reaction===e.emoji),t?.number)t.number++;else{let t={number:1,reaction:e.emoji??"deleted",user:!1};_?.reactions?.push(t)}return _.active_reaction=e.emoji,_.active_reaction=null,_}).then(()=>{A(!y)}).catch(e=>{console.log(e)})},getSingleSqueal=()=>{let e=r.F+`api/squeal-response/smm/${s}/${p.login}`;fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("id_token")}}).then(e=>{if(!e.ok)throw e.status;return e.json()}).then(e=>{console.log(e),v(e)}).catch(e=>{console.log(e)})},E=Date.now(),S=`data: ${_?.squeal?.img_content_type}  ;base64, ${_?.squeal?.img}`,k=_?.squeal?.body?.split(" "),getIcon=e=>{switch(e){case"heart":return a.jsx(l.Z,{});case"exploding":return a.jsx(d.Z,{});case"cold":return a.jsx(c.Z,{});case"nerd":return a.jsx(u.Z,{});case"clown":return a.jsx(m.Z,{});case"bored":return a.jsx(x.Z,{});default:return null}};return(0,i.useEffect)(()=>{getSingleSqueal()},[y]),(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"arrow-back",children:a.jsx(h(),{href:"/dashboard/stats",children:a.jsx(n.Z,{sx:{fontSize:50}})})}),a.jsx("div",{className:"flex justify-center align-top mt-8",children:(0,a.jsxs)("div",{className:"p-5 w-1/2 bg-white shadow-lg shadow-grey-500/50 rounded-xl mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center border-slate-500 ",children:[(0,a.jsxs)("div",{className:"flex flex-row",children:[a.jsx(C(),{className:"w-10 h-10 rounded-full mr-3",src:P.Z,alt:"Rounded avatar"}),a.jsx(h(),{href:"/dashboard/feed/"+_?.userName,className:"flex content-center justify-center align-middle",children:(0,a.jsxs)("h3",{className:"font-normal text-2xl",children:["@",_?.userName]})})]}),a.jsx("span",{className:"text-[16px] font-medium inline-flex text-[#B4ACAC]",children:function(e,t){var s=e-t;return s<6e4?Math.round(s/1e3)+" seconds ago":s<36e5?Math.round(s/6e4)+" minutes ago":s<864e5?Math.round(s/36e5)+" hours ago":s<2592e6?Math.round(s/864e5)+" days ago":s<31536e6?"about "+Math.round(s/2592e6)+" months ago":"about "+Math.round(s/31536e6)+" years ago"}(E,_?.squeal?.timestamp)})]}),a.jsx("div",{className:"flex gap-1 mt-4",children:_?.squeal?.destination?.map((e,t)=>a.jsx("p",{className:"mr-4 bg-[#4B2CA0] py-1 px-4 rounded-3xl text-white text-[16px]",children:a.jsx(h(),{href:"/dashboard/feed/channel/"+e.destination_id,children:e.destination})},t))}),(0,a.jsxs)("div",{className:"mt-6",children:[_?.squeal?.img&&_.squeal?.img?.length!=0?a.jsx(C(),{src:S,alt:"squealerImage",className:"h-48 w-48 rounded-full mr-3"}):null,_?.geoLoc?.latitude&&_.geoLoc.longitude?a.jsx(i.Suspense,{children:a.jsx(g.default,{lat:_.geoLoc.latitude,lng:_.geoLoc.longitude})}):null,a.jsx("p",{className:"mt-3",children:k?.map(e=>e.match(t)?a.jsxs(a.Fragment,{children:[a.jsx("a",{href:e,target:"_blank",className:"underline text-[#0000EE]",children:e},e)," "]}):e+" ")})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-6 items-end mb-6",children:[a.jsx(b.Z,{squeal_id:_?.squeal?._id,squealDestinations:_?.squeal?.destination,user_id:_?.squeal?.user_id,num_comments:_?.comments_number}),(0,a.jsxs)("div",{className:"flex",children:[_?.squeal.body.length!=void 0&&_?.squeal.body.length>1?(0,a.jsxs)("p",{className:"text-[16px] font-medium inline-flex text-[#B4ACAC]",children:[_?.squeal?.body?.length," Caratteri"]}):(0,a.jsxs)("p",{className:"text-[16px] font-medium inline-flex text-[#B4ACAC]",children:[_?.squeal?.body?.length," Carattere"]}),(0,a.jsxs)("p",{className:"text-[16px] font-medium inline-flex ml-5 text-[#B4ACAC]",children:[_?.views?.number," Views"]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-6 items-end mb-6",children:[a.jsx("div",{className:"reactions",children:a.jsx(f(),{children:a.jsx(q(),{ariaLabel:"Reaction SpeedDial",icon:a.jsx(w(),{}),direction:"right",FabProps:{sx:{bgcolor:"#F4F4F4",color:"#4B2CA0","&:hover":{bgcolor:"#4B2CA0",color:"#F4F4F4"}}},children:Z.map((e,t)=>a.jsx(N(),{icon:e.icon,tooltipTitle:e.name,onClick:function(){console.log("reaction"),_?.squeal!=void 0&&void 0!=_.squeal._id&&e.command()},className:"w-12 h-12"},t))})})}),a.jsx("ul",{className:"flex gap-x-3",children:_?.reactions?.map((e,t)=>a.jsxs("li",{className:"relative flex items-center gap-x-3 bg-white rounded-3xl",children:[getIcon(e.reaction),a.jsx("div",{className:"absolute inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-[#4B2CA0] border-2 border-white rounded-full -bottom-2 -end-2 dark:border-gray-900",children:e.number})]},t))})]})]},_?.squeal?._id)})]})}},26382:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var a=s(17536);let r=(0,a.createProxy)(String.raw`/Users/matteoraggi/Dev/avvoltoio-smm/src/app/dashboard/stats/[squeal_id]/page.tsx`),{__esModule:n,$$typeof:i}=r,o=r.default,l=o}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[672,520,194,418,937,195,359,264,978,85,464,333,900],()=>__webpack_exec__(75001));module.exports=s})();